![image-20211228092702075](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228092702075.png)

## 1. 泊松加和的均值

把到达速率设置为1

$P(k,\tau)$是泊松到达次数的PMF，而我们知道$\lambda \tau$是到达次数的平均值，那么我们可以把$\lambda \tau$这个整体看做是泊松PMF的一个参数。

如果我们在时间轴上有间隔为$\mu和\nu$的两个时间段，我们假设这两个时间段分别到达数量为$M和N$，而$\lambda$已经确定，所以$M和N$仅依靠$\mu和\nu$就可以确定， 也就是$\mu和\nu$是MN的参数。MN互相独立，因为$\mu和\nu$不相交。

而M+N是这两个时间段arrival的总数，它是一个均值为$\mu+\nu$的泊松过程。

泊松随机变量的加和得到的泊松随机变量，其均值依然是之前均值的加和，这是一个非常好的性质，在正态分布和泊松分布中存在。

![image-20211228101142127](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228101142127.png)

## 2. 泊松过程的merging

### 泊松过程的和的速率是速率之和

这个过程和结果都与伯努利过程的merging相似。

例如，有两个独立的灯泡，红色和绿色，分别以不同速率的泊松变量闪烁；当一个色盲者观察这两个灯泡时，他无法区分颜色，只能看到灯泡闪烁与否，这两个灯泡共同闪烁过程依然是一个泊松过程，并且其闪烁速率是红绿灯泡闪烁速率之和。

与伯努利过程一样，我们依然忽略二阶项，由于红色和绿色是独立的，所以求他们共同闪烁/一个闪一个不闪/两个都不闪的概率可以通过乘积求出。

![image-20211228105254943](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228105254943.png)

### merge后的arrival来自某一过程的概率

问题：merge后有10次闪烁，求其中4个来自红色灯泡的概率

我们先看1次闪烁的情况。

依然从合并的两个过程的2x2表格观察，merge后的闪烁总概率是绿色框里的两个概率之和，来自其中一个的概率是两个数中的一个，计算条件概率：其中一个概率除以概率的加和。

又因为每次闪烁是独立事件，所以我们相当于处理10次独立的伯努利试验，因此这里可以使用二项分布计算。

![image-20211228110536873](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228110536873.png)

### merge后的first arrival问题

假设有三个同批次灯泡，有着同样的参数，他们烧坏的概率都是参数为$\lambda$的指数分布。

- 问题1：第一个灯泡烧坏的时间的期望值是多少？（即最小值的期望值）

根据题目不难看出，这是三个泊松过程的合并，并且问题可以转换成：合并后的第一次arrival是什么时候？

根据上面的结论，这个合并后的泊松过程的参数为$3\lambda$，那么第一次arrival的分布就是参数为$3\lambda$的指数分布。

- 问题2：三个灯泡全部烧坏的时间的期望值是多少？

我们从灯泡烧坏的过程入手

首先是第一个灯泡烧坏，这时一共三个泊松过程，那么第一次烧坏的概率分布仍让是参数为$3\lambda$的指数分布；

然后是第二个灯泡烧坏，这时只剩两个灯泡，即两个泊松过程，由于泊松过程的start fresh性质，从第一次烧坏到第二次烧坏的概率分布为参数为$2\lambda$的指数分布；

然后是最后一个灯泡，从第二个到第三个灯泡烧坏的时间概率是参数为$\lambda$的指数分布；

所以总时间的期望值时上面这三个数的相加。

![image-20211228121528004](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228121528004.png)

# 3. 泊松过程的splitting

例子：在一个泊松过程中抛硬币(偏倚度为p)，抛出的正反面也是两个泊松过程。

在一个极短时间$\delta$里出现抛硬币事件的概率为$\lambda \delta$，所以在同样的时间里出现抛硬币结果为正面的概率为$\lambda \delta q$。

关于splitted stream的独立性，我们论证过伯努利过程在split后的过程是不独立的，但是对于泊松过程来说是独立的，即：知道在某一时间点的某一stream出现arrival，并不能说明在另一个stream没有出现arrival。

![image-20211228124028329](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211228124028329.png)

## 4. random incidence paradox

### 泊松过程：

公交公司声称每小时发车4趟，但是个人调查：人每天在时间点t到公交站，上一班车u时间点到达的，下一班车v时间点到达，v-u的平均时间为30min。调查与声称是否相符？

其中t为常数(例如每天12点去调查)，UV是随机变量。

其中V-t是指数型随机变量，因为从t开始观察，直到first arrival，典型泊松过程。

而t-U，是反向泊松过程，其独立性并不受影响，所以也是指数型随机变量。

所以V-U是两个泊松过程的相加，其期望值是$2/\lambda$，所以公交公司说的是对的。

但是按照直觉来计算，如果每小时发车四趟，那么每趟车之间的间隔应该是15min，为什么现在变成了30min？

这是因为我们人为选择的观察时间形成了一个多余的interarrival，这属于抽样方法造成的偏差。

![image-20211229092930628](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229092930628.png)

### 非泊松过程

同样是等公交，但是这次interarrival times 是iid随机变量，5或10分钟一次。

所以平均等待间隔应该是7.5分钟。

但是当一个人从一个随机时间点开始观察的时候，大概率会落到10min的间隔中，因为在时间轴上，10min间隔比5min间隔占得长度要多，所以观察时间点在10min间隔的概率是2/3,5分钟间隔的概率为1/3.加起来应该是8.3min。

现在我们看到，随机时间点观察得到的结论普遍比计算结论要长，这个随即观察的模式可以抽象为一个新的过程："renewal processes"。

对于一个随机过程，测量方式对测量结果有重要影响：是测量第k次到达的interarrival time及其平均值，还是通过在随机时间点出现进行测量。两种抽样方式得出的结果是不同的。

![image-20211229095727552](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229095727552.png)

### 抽样时选择样本的重要性

对不同的个体抽样会造成不同的结果：

家庭/家庭中的人

公交车/公交车的乘客

班级/班级中的学生

![image-20211229105252189](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229105252189.png)

## 5. 泊松过程和正态分布对二项分布的近似

### 近似的矛盾

在中心极限定理时，我们曾对二项分布进行过近似，近似结果为正态分布；

而我们又知道二项分布可以近似为泊松过程，如何理解这两者的矛盾？

首先我们把泊松过程的到达速率设为1；

单位时间到达个数为n，把单位时间分割成n份，每份长度为$1/n$；

由于速率是1，所以第i份时间小间隔中到达的个数仅与时间长度相关：$X_i\sim Poisson(1/n)$；

而单位时间间隔中的到达个数是单位间隔内所有$X_i$的总和，$S=\sum X_i\sim Poisson(1)$，并且X为iid；

按照中心极限定理，n趋近无穷大的时候，S又应该是正态分布的，真的吗？

事实上，中心极限定理适用范围是，$X_i$的分布必须是固定的，但此处X的分布取决于n的大小，当我们改变n的时候，X的分布其实是变化的，所以S与正态分布无关。

![image-20211229110828816](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229110828816.png)

### 近似的异同

- 对于n个参数为p的伯努利试验来说：

如果p是固定的，那么n趋近于无穷大的时候，近似为正态；

如果np是固定的，那么n趋近于无穷大的时候，近似为泊松分布。

-  对于一个参数是n的泊松过程来说(到达速率设定为1，time interval也设定为1)：

当n趋近无穷的时候，因为每个time interval的到达次数是固定的分布，所以其总体分布近似于正态。

- 在实际状况中：

  如果p很小(p近似于连续)，n比较大，则用泊松；

  如果p不算小(p完全离散)，n比较大，np很大，则用正态；

  如果p很小，n极大，导致np也很大，那么两种分布都可以。

![image-20211229112721508](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229112721508.png)

## 6. Poisson arrivals during an exponential interval

泊松过程发生在[0,T]之间，T是独立于泊松过程的指数型随机变量。

我们设在T之前的arrival个数为$N_T$,希望求arrival为k的分布。

### 数学方法

我们先假定T是固定的，这样我们就得到了一个典型的泊松分布PMF，这其实是$p(N_T=k)$在T=t条件下的条件概率分布，所有使用全概率公式，对所有t的可能取值相加， 也就是对T进行0到正无穷的积分。

但是这个积分很难求，所以我们需要一个简便方式。

![image-20211229121958097](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229121958097.png)

### 直觉方法

由于T是一个指数型分布，所以我们可以把它当成是泊松分布中第一次到达时间T的PDF。这样题目就变成了两个泊松过程的merge问题。

题目给出的泊松分布在T之前的arrival个数为$N_T$，这是第一个泊松分布的到达个数PMF；

而指数分布随机变量T，则是第二个泊松分布的第一次arrival时间的PDF。

我们假设到T为止，merge后的泊松过程有K次到达，那么题目所问的就是：在K次到达的时候，第二个泊松分布有了第一个arrival，而第一个泊松分布有K-1个arrival的概率分布。

我们现在把合并后的泊松分布视为一个单独的分布，如果arrival来自第二个泊松分布，则我们称之为一个success；而K是我们在获得第一个success之前所需要进行的试验数目。

现在，这个新的分布其实是一个有一系列伯努利试验组成的。它的成功率就是两个泊松试验的到达率的比值。而我们所求的在第一次成功位置所需要进行的试验的个数，就变成了几何分布问题。

![image-20211229123502243](https://gitee.com/joy_thestraydog/typora/raw/master/img/image-20211229123502243.png)