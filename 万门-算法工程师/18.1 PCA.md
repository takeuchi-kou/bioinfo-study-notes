# PCA

## 基本原理

主成分分析(PCA Pricipal component analysis),是通过考察变量之间的相关性，找到少数几个主成分来代表原来的多个变量，同时使它们能够尽可能的保留原变量的信息。

- 主成分之间彼此互不相关

## PCA的降维可视过程

如下图，我们可以看出X1 X2之间是存在相关关系的。

![image-20220119143537930](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119143537930.png)

我们想把这两个变量合并成一个变量，并且又能尽可能多地保留这两个变量中所包含的信息。

首先，把这个散点图中的点圈起来，可以看出他们大致组成一个椭圆形

![image-20220119143709961](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119143709961.png)

然后把椭圆形的长轴和短轴分别作为新的坐标轴，称为主轴

![image-20220119143916976](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119143916976.png)

然后把X1X2在新的坐标系下，即使用Y1Y2来进行表示；

然后把Y2舍去，因为Y1变量保留了最多的信息(方差)；

于是，Y1成为了主成分。

### 扩展到高维

在高维情况下的降维过程不可视，但我们遵循同样的步骤进行降维：首先选择方差最大的方向，把这个(这些)方向上的变量保留

## PCA的数学模型

首先按照上述原则进行一个线性变换，得到的维数与之前其实是一样的。

![image-20220119144702832](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119144702832.png)

## 主成分分析的步骤

1. 对于原来的p个变量进行标准化，以消除变量水平和量纲的影响；
2. 根据标准化后的数据进行相关系数矩阵的计算；
3. 求出相关系数矩阵的**特征根，即主轴或方差**，及对应的*单位特征向量*；
4. 确立主成分，并对主成分的含义进行适当的解释

## 例子

### 主成分分析表

![image-20220119151425831](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119151425831.png)

初始特征值代表主轴的长度，反映了主成分对原始变量的影响程度，它表示引入该主成分后可以解释的原始变量信息。

主成分方差贡献率：某个特征根占特征根综合的比例。上图的方差的%就是方差贡献率

选几个主成分？

1. 累计方差贡献率达到80%以上；
2. 特征根>1的主成分。（如果特征根<1，则这个新的成分可以解释的信息甚至不如原始变量）

### 碎石图

直观地显示出特征值下降的速率

![image-20220119152124072](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119152124334.png)

### 主成分的因子载荷矩阵

即相应的线性相关系数，如公式所示。

注意，其中的X1X2并非原始变量，而是标准化后的原始变量。

另外，从表中可以看出，成分1与原始变量2,3,6相关性更大；

成分2余原始变量1,4,5相关性更大

![image-20220119152734428](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119152734428.png)

### 成分载荷图

就是把上表画成图了根据点的位置可以直观看出主成分分别与哪些原变量相关性更强。

![image-20220119153202275](https://gitee.com/joy_thestraydog/typora1.0/raw/master/image-20220119153202275.png)